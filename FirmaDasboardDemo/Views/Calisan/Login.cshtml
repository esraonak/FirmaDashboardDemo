@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.FirmaAdi Giriş Portalı</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="~/plugins/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="~/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <link rel="stylesheet" href="~/dist/css/adminlte.min.css">

    <style>
        .firma-logo {
            max-width: 120px;
            max-height: 120px;
            margin-bottom: 10px;
        }

        @@media (max-width: 768px) {
            .login-box

        {
            width: 90% !important;
            margin: 2rem auto;
        }

        .firma-logo {
            max-width: 80px;
            max-height: 80px;
        }

        .login-logo {
            font-size: 1.2rem;
        }

        .btn-block {
            width: 100%;
        }

        }
    </style>
</head>
<body class="hold-transition login-page">
    <div class="login-box text-center">

        @* Firma Logosu *@
        <img src="@ViewBag.LogoUrl" alt="Logo" class="firma-logo rounded-circle" />

        @* Firma Başlığı *@
        <div class="login-logo">
            <b>@ViewBag.FirmaAdi</b> Giriş Portalı
        </div>

        <div class="card">
            <div class="card-body login-card-body">
                <p class="login-box-msg">Lütfen giriş yapın</p>

                @if (ViewBag.Error != null)
                {
                    <div class="alert alert-danger">@ViewBag.Error</div>
                }

                <form asp-controller="Calisan" asp-action="Login" asp-route-firmaSeoUrl="@ViewBag.FirmaSeoUrl" method="post">
                    <div class="input-group mb-3">
                        <input type="text" name="Username" class="form-control" placeholder="Email" required />
                        <div class="input-group-append">
                            <div class="input-group-text"><span class="fas fa-user"></span></div>
                        </div>
                    </div>
                    <div class="input-group mb-3">
                        <input type="password" name="Password" id="passwordInput" class="form-control" placeholder="Şifre" required />
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" type="button" onclick="togglePassword()" id="togglePasswordIcon">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-8"></div>
                        <div class="col-4">
                            <button type="submit" class="btn btn-primary btn-block">Giriş</button>
                        </div>
                    </div>
                </form>

                <div class="mt-3 text-center">
                    <a href="/@ViewBag.FirmaSeoUrl/Kullanici/SifremiUnuttum" class="btn btn-link">
                        <i class="fas fa-unlock-alt"></i> Şifremi Unuttum
                    </a>
                </div>

            </div>
        </div>
    </div>

    <script src="~/plugins/jquery/jquery.min.js"></script>
    <script src="~/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/dist/js/adminlte.min.js"></script>

    <script>
        $(document).ready(function () {
            var mesaj = '@TempData["LoginError"]';
            if (mesaj && mesaj !== "") {
                alert(mesaj); // ⚠️ Dilersen burayı toastr ile değiştirebiliriz.
            }
        });

        function togglePassword() {
            const input = document.getElementById("passwordInput");
            const icon = document.getElementById("togglePasswordIcon").querySelector("i");
            if (input.type === "password") {
                input.type = "text";
                icon.classList.remove("fa-eye");
                icon.classList.add("fa-eye-slash");
            } else {
                input.type = "password";
                icon.classList.remove("fa-eye-slash");
                icon.classList.add("fa-eye");
            }
        }
    </script>
</body>
</html>
